<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Day 2 - NgModules / Routing / Observables / Forms</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <style>
        .reveal pre {
            width: 100%;
        }
    </style>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <section>
                    <h2>JavaScript Modules</h2>
                    <div class="fragment">
<pre>
    <code class="hljs javascript">
export const MY_CONST = 42;

export function* myGeneratorFunc() {
    yield something;
}
export class MyClass {
    ···
}

export default myDefaultVar = 42;
    </code>
</pre>
<pre>
    <code class="hljs javascript">
import myDefaultVar, { MY_CONST } from 'path-to-file'
    </code>
</pre>                        
                    </div>
                </section>
                <section>
                    <p class="fragment">- each file is a module and all objects defined in the file belong to that module</p>
                    <p class="fragment">- public properties marked with export keyword</p>
                    <p class="fragment">- other JavaScript modules use import statements to access public objects from other modules</p>
                </section>
            </section>
            <section>
                <section>
                    <h2>NgModules</h2>
                    <p class="fragment">A mechanism to group components, directives, pipes and services that are related</p>
                    <p class="fragment">Similar to ES6 Modules (
                        <i>declarations, imports, exports</i> )</p>
                    <div class="fragment">
                        <pre>
                                    <code class="hljs javascript">
import { NgModule } from '@angular/core';
...

@NgModule({ //decorator
  imports: [BrowserModule],
  declarations: [AppComponent],
  exports: [...],
  providers: [...],
  bootstrap: [AppComponent]
})
export class AppModule { }
                                    </code>
                                </pre>
                    </div>
                </section>
                <section>
                    <h4>Imports</h4>
                    <ul>
                        <li class="fragment">Expects an array of modules - only NgModules</li>
                        <li class="fragment">NgModules don't inherit access to the declaration of other NgModule / must import what it needs</li>
                    </ul>
                </section>
                <section>
                    <h4>Declarations</h4>
                    <ul>
                        <li class="fragment">Components / Directives / Pipes belonging to the NgModule - only Declarables </li>
                    </ul>
                </section>
                <section>
                    <h4>Exports</h4>
                    <ul>
                        <li class="fragment">All declarables are private by default</li>
                        <li class="fragment">Components visible for other modules </li>
                        <li class="fragment">Can Re-Export imported modules (eg: BrowserModule, RoutingModules)</li>
                    </ul>
                </section>
                <section>
                    <h4>Providers</h4>
                    <ul>
                        <li class="fragment">Services declared here will be visible app-wide( scoped using lazy-loading)</li>
                        <li class="fragment">When there are multiple providers for the same injection token, the last registration wins. </li>
                        <li class="fragment">root-scoped / module-scoped -
                            <i>Component providers always supersede NgModule providers</i>
                        </li>
                    </ul>
                </section>
                <section>
                    <h4>Bootstrap</h4>
                    <ul>
                        <li class="fragment">the root component that Angular creates and inserts into the index.html host web page</li>
                        <li class="fragment">base of the tree of components</li>
                    </ul>
                </section>
                <section>
                    <h4>entryComponents</h4>
                    <ul>
                        <li class="fragment">Components that cannot be reached by compiler</li>
                        <li class="fragment">bootstrapped root component / specified in a route definition</li>
                        <li class="fragment">the Angular compiler only generates code for components which are reachable from the entryComponents</li>
                    </ul>
                </section>

                <!-- <section>
                    <h2>AppModule / Application root module</h2>
                    <ul>
                        <li class="fragment">Contains the component for bootstrap - launch the app</li>
                        <li class="fragment">Dynamic bootstraping - JIT Compiler</li>
                        <li class="fragment">Static bootstraping - AOT Compiler</li>
                    </ul>
                </section> -->

                <section>
                    <h2>Feature modules</h2>
                    <ul>
                        <li class="fragment">Same properties and metadata as the Root Module</li>
                        <li class="fragment">Share the same execution context, same injector as Root Module - services available to all</li>
                        <li class="fragment">Extends the app</li>
                        <li class="fragment">Can expose or hide its implementations from other modules</li>
                        <ul>
                </section>
                <section>
                  <h2>Domain modules</h2>
                  <ul>
                      <li class="fragment">particular application domain</li>
                      <li class="fragment">consists mostly of declarations</li>
                      <li class="fragment">only the top component is exported</li>
                      <li class="fragment">imported exactly once by a feature module</li>
                      <ul>
              </section>
              <section>
                <h2>Routed modules</h2>
                <ul>
                  <li class="fragment">domain modules whose top component are target of a route navigation</li>
                  <li class="fragment">all lazy loaded modules</li>
                  <li class="fragment">does not export anything</li>
                  <li class="fragment">must not be imported</li>
                  <li class="fragment">rarely have providers</li>
                <ul>
              </section>
              <section>
                <h2>Routing modules</h2>
                <ul>
                  <li class="fragment">used for separating route concerns</li>
                  <li class="fragment">define routes and add routes config to the router</li>
                  <li class="fragment">adds guards and resolvers</li>
                  <li class="fragment">foo.module.ts -> foo-routing.module.ts</li>
                  <li class="fragment">imports and re-exports the routing module</li>
                  <li class="fragment">does not have own declarations</li>
                <ul>
              </section>
              <section>
                <h2>Service modules</h2>
                <ul>
                  <li class="fragment">provide utility services ( data access, messaging )</li>
                  <li class="fragment">entirely of providers / no declarations (HttpClientModule)</li>
                  <li class="fragment">imported only in root AppModule</li>
                </ul>
              </section>
              <section>
                <h2>Widget modules</h2>
                <ul>
                  <li class="fragment">makes declarables available to external modules</li>
                  <li class="fragment">3rdParty, Visual libraries / components</li>
                  <li class="fragment">consists entirely of declarations / rarely have providers</li>
                  <li class="fragment">can be imported anywhere</li>
                <ul>
              </section>
                <section>
                    <table>
                        <thead>
                            <tr>
                                <th>Feature Module</th>
                                <th>Declarations</th>
                                <th>Providers</th>
                                <th>Exports</th>
                                <th>Imported by</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Domain</td>
                                <td>Yes</td>
                                <td>Rare</td>
                                <td>Top component</td>
                                <td>Feature, AppModule</td>
                            </tr>
                            <tr>
                                <td>Routed</td>
                                <td>Yes</td>
                                <td>Rare</td>
                                <td>No</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td>Routing</td>
                                <td>No</td>
                                <td>Yes (guards)</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Service</td>
                                <td>No</td>
                                <td>Yes</td>
                                <td>No</td>
                                <td>AppModule</td>
                            </tr>
                            <tr>
                                <td>Widget</td>
                                <td>Yes	</td>
                                <td>Rare</td>
                                <td>Yes</td>
                                <td>Feature</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section>
                    <h4>Loading</h4>
                    <ul>
                        <li class="fragment">Eagerly</li>
                        <li class="fragment">Lazy - by the Router
                            <ul>
                                <li>Not loaded until the browser navigates to its components</li>
                            </ul>
                            <pre>
                                    <code class="hljs javascript">
export const routes: Routes = [
...
{ 
    path: 'lazy-loaded-module', 
    loadChildren: 'app/lazy/lazy-module.module#LazyModule' //relative path to the module
},
...
];
                                    </code>
                                </pre>
                        </li>
                        <ul>
                </section>
                <section>
                    <h2>forRoot() / forChild()</h2>
                    <ul>
                      <li class="fragment">forRoot() - injector configuration, only one time in root module</li>
                      <li class="fragment">forChild() - not injector configuration, only directives</li>
                    <ul>
                  </section>
    
            </section>

            <section>
                <section>
                    <h2>Routing</h2>
                    <ul>
                      <li>Angular router</li>
                      <li>enables navigation from one view to the next</li>
                    </ul>
                </section>

                <section>
                    <pre>
                            <code class="hljs javascript">
const appRoutes: Routes = [
  { path: 'url', component: SomeComponent },
  { path: 'collection/:id', component: AnotherComponent },
  {
    path: 'collection',
    component: CollectionComponent,
    data: { title: 'Some title' }
  },
  { path: '',
    redirectTo: '/dashboard',
    pathMatch: 'full'
  },
  { path: '**', component: PageNotFoundComponent }
];

@NgModule({
  imports: [
    RouterModule.forRoot(
        appRoutes,
        { enableTracing: true } // <-- debugging purposes only
    )
  ]
})
export class AppModule { }
                                    </code>
                                </pre>
                </section>
                <section>
                    <h4>Router outlet</h4>
                    <pre>
                            <code class="hljs javascript">
<router-outlet></router-outlet>
<!-- Routed views go here --> 
                            </code>
                        </pre>
                </section>

                <section>
                    <h4>Router links</h4>
                    <ul>
                        <li>routerLink</li>
                        <li>routerLinkActive</li>
                    </ul>
                    <pre>
<code class="hljs xml">
<a routerLink="/url-to-navigate" routerLinkActive="active">Simple Url</a>
<a [routerLink]="['url', user.id]" routerLinkActive="active">User edit</a>
<!-- link parameters array //-->
</code>
                        </pre>
                </section>

                <section>
                    <h4>ActivatedRoute</h4>
                    <ul>
                        <li>represents the current state of the router</li>
                        <li>route path / parameters of the current route</li>
                    </ul>
                    <pre>
                            <code class="hljs javascript">
import { Router, ActivatedRoute, Params } from '@angular/router';
...
constructor(
  private route: ActivatedRoute,
  private router: Router
) {}
...
ngOnInit() {
  this.route.paramMap.pipe(
    // (+) converts string 'id' to a number
    .switchMap((params: ParamMap) => {
      return this.service.fetchSomeData(+params['id']);
    })
  )
  .subscribe(data => this.data = data);
}

                            </code>
                        </pre>
                </section>

                <section>
                    <h4>Router Events</h4>
                    <ul>
                        <li>emitten during each navigation</li>
                        <li>NavigationStart, RoutesRecognized, RoutesRecognized, RouteConfigLoadEnd, NavigationEnd, NavigationCancel,
                            NavigationError</li>
                    </ul>
                </section>

                <!-- <section>
                    <h4>Snapshot</h4>
                    <ul>
                        <li class="fragment">Makes available only the initial value of the params of the route</li>
                    </ul>
                    <pre class="fragment">
                            <code class="hljs javascript">
...
ngOnInit() {
  // (+) converts string 'id' to a number
  let id = +this.route.snapshot.paramMap.get('id');//only the initial value

  this.service.getHero(id)
    .then((hero: Hero) => this.hero = hero);
}

                            </code>
                        </pre>
                </section> -->

                <section>
                    <h4>Child Routes</h4>
                    <pre>
                                <code class="hljs javascript">
const routes: Route[] = [{
    path: 'cars',
    component: CarsHome,
    children: [{
        path: '',
        canActivateChild: [AuthGuard],
        children: [
            {
                path: ':id',
                component: DetailComponent
            },
            {
                path: ':id/edit',
                component: EditComponent
            }
        ]
    }]
}];
                                </code>
                            </pre>
                    <ul>
                        <li>The router displays the DetailComponent in the router-outlet of the CarsHome</li>
                    </ul>
                </section>

                <section>
                    <h4>Relative navigation</h4>
                    <ul>
                        <li>The router supports directory-like syntax in a link parameters list</li>
                    </ul>
                    <pre>
                                    <code class="hljs javascript">
        this.router.navigate(['../'], { relativeTo: this.route });
                                    </code>
                                </pre>
                </section>
                <section>
                    <h4>Named outlets &amp; Secondary routes</h4>
                    <pre>
                            <code class="hljs javascript">
//route configuration
{
  path: 'chat-url',
  component: ChatComponent,
  outlet: 'chat'
},

//template markup
<router-outlet></router-outlet>
<router-outlet name="chat"></router-outlet>

//template navigation
<a [routerLink]="[{ outlets: { chat: ['chat-url'] } }]">Chat Outlet</a>

...
//clearing named outlets routes
this.router.navigate([{ outlets: { chat: null }}]);
                            </code>
                        </pre>
                </section>

                <section>
                    <h4>Guards</h4>
                    <p>A Guard's return value control the user navigation:</p>
                    <ul>
                        <li>true -> navigation continues</li>
                        <li>false -> navigation stops</li>
                    </ul>
                </section>

                <section>
                    <h4>Supported Guards</h4>
                    <ul>
                        <li>CanActivate</li>
                        <li>CanActivateChild</li>
                        <li>CanDeactivate</li>
                        <li>Resolve</li>
                        <li>CanLoad</li>
                    </ul>
                </section>

                <section>
                    <h4>CanActivate</h4>
                    <pre>
                                <code class="hljs javascript">
import { Injectable }       from '@angular/core';
import {
    CanActivate, Router,
    ActivatedRouteSnapshot,
    RouterStateSnapshot
} from '@angular/router';
import { AuthService }      from './auth.service';

@Injectable()
export class AuthGuard implements CanActivate {
    constructor(private authService: AuthService, private router: Router) {

    }

    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {
        let url: string = state.url;
        return this.checkLogin(url);
    }
}
                                </code>
                            </pre>
                </section>

                <section>
                    <h4>Resolvers / pre-fetching component data</h4>
                    <pre>
                            <code class="hljs javascript">
@Injectable()
export class DataResolver implements Resolve&laquo;SomeModel&raquo; {
  constructor(private cs: DataService, private router: Router) {}
  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise&laquo;SomeModel&raquo; {
    let id = route.params['id'];
    return this.cs.getData(id).then(data => {
      if (data) {
        return data;
      } else { // id not found
        this.router.navigate(['/another-url']);
        return null;
      }
    });
  }
}
                            </code>
                        </pre>
                </section>

                <section>
                    <h4>Asynchronous routing</h4>
                    <ul>
                        <li class="fragment">Lazy loading route configuration</li>
                        <li class="fragment">Preloading - Custom preloading strategies:
                            <pre>
                            <code class="hljs javascript">
{
  path: 'url-to-load',
  loadChildren: 'app/module-name/module-name.module#ModuleNameModule',
  data: { preload: true }
},
                            </code>
                        </pre>
                </section>
                <section>

                    <pre>
                            <code class="hljs javascript">
export class SelectivePreloadingStrategy implements PreloadingStrategy {
  preloadedModules: string[] = [];

  preload(route: Route, load: () => Observable&laquo;any&raquo;): Observable&laquo;any&raquo; {
    if (route.data && route.data['preload']) {
      this.preloadedModules.push(route.path);
      return load();
    } else {
      return Observable.of(null);
    }
  }
}
                            </code>
                        </pre>
                    </li>
                    </ul>
                </section>
            </section>

            <section>
                <section>
                    <h2>Forms</h2>
                    <p>mainstay of business application</p>
                    <ul>
                        <li>
                            <i>two-way data binding</i>
                        </li>
                        <li>
                            <i>change tracking</i>
                        </li>
                        <li>
                            <i>validation</i>
                        </li>
                        <li>
                            <i>error handling</i>
                        </li>
                    </ul>
                </section>
                <!-- <section>
                    <h4>Template driven forms</h4>
                    <p>
                        <code class="hljs javascript"><pre>
import { FormsModule } from '@angular/forms';</pre></code>
                    </p>
                    <ul>
                        <li>use this when you have static simple validation rules</li>
                        <li>the control model is implicit in the template.</li>
                        <li>add HTML validation attributes to the elements</li>
                        <li>Angular exposes the state of controls </li>
                    </ul>
                </section>
                <section>
                    <p>
                        <pre>
                            <code class="hljs javascript">
<label for="name">Name</label>

<input type="text" id="name" class="form-control"
       required minlength="4" maxlength="24"
       name="name" [(ngModel)]="hero.name"
       #name="ngModel" >

<div *ngIf="name.errors && (name.dirty || name.touched)"
     class="alert alert-danger">
    <div [hidden]="!name.errors.required">
      Name is required
    </div>
    <div [hidden]="!name.errors.minlength">
      Name must be at least 4 characters long.
    </div>
    <div [hidden]="!name.errors.maxlength">
      Name cannot be more than 24 characters long.
    </div>
</div>
                            </code>
                        </pre>
                    </p>
                </section>

                <section>
                    <h4>ngModel</h4>
                    <ul>
                        <li>two-way data binding</li>
                        <li>user touched the control.</li>
                        <li>value changed</li>
                        <li>value became invalid </li>
                        <li>updates the css with classes reflecting the state </li>
                    </ul>
                </section> -->

                <!-- <section>
                    <ul>
                        <li>add reference variable to "spy" the input -> #spyName</li>
                        <li>submit with ngSubmit()
                            <pre>
                            <code class="hljs javascript">
<form (ngSubmit)="onSubmit()" #heroForm="ngForm"></form>
                            </code>
                        </pre>
                        </li>
                    </ul>
                </section> -->

                <section>
                    <h2>Reactive forms</h2>
                    <!-- <p>
                        <code class="hljs javascript"><pre>
import { ReactiveFormsModule } from '@angular/forms';</pre></code>
                    </p> -->
                    <ul>
                        <li>more: robust, scalable, reusable, testable</li>
                        <li>build around Observable streams</li>
                        <li>keep the data model pure</li>
                        <li>each change to form state returns a new state</li>
                    </ul>
<pre>
  <code class="hljs javascript">
    import { ReactiveFormsModule } from '@angular/forms';
  </code>
</pre>
                </section>

                <section>
                    <h4>Create</h4>
<pre>
  <code class="hljs javascript">
this.name = new FormControl('');

//read value
this.name.valueChanges.subscribe(...);
  </code>
</pre>
                    <h4>Add it to the view</h4>
<pre>
  <code class="hljs javascript">
<label class="center-block">Name:
  <input class="form-control" [formControl]="name">
  Value: {{ name.value }} <!-- Read value -->
</label>
  </code>
</pre>
                  <h4>Update value</h4>
<pre>
  <code class="hljs javascript">
    this.name.setValue('New value');
  </code>
</pre>
                </section>
                <section>
                  <h4>Form groups</h4>
<pre>
  <code class="hljs javascript">
profileForm: FormGroup;
...
  ngOnInit() {
    this.profileForm = new FormGroup({
      firstName: new FormControl(initialValue, validators, asyncValidators);
    })
  }
  ...
  onSubmit() {
    console.log(this.profileForm.value);
  }
}
  </code>
</pre>                    
<pre>
  <code class="hljs javascript">
<form [formGroup]="profileForm" (ngSubmit)='onSubmit()'>
  <label>
    First Name:
    <input type="text" formControlName="firstName">
  </label>
</form>
  </code>
</pre>
                </section>

                <section>
                    <h4>Form Builder</h4>
<pre>
<code class="hljs javascript">
import { FormBuilder, FormGroup } from '@angular/forms';
</code>
</pre>
<pre>
  <code class="hljs javascript">
export class DetailComponent3 {
  theForm: FormGroup; // <--- theForm is of type FormGroup

  constructor(private fb: FormBuilder) { // <--- inject FormBuilder
    this.createForm();
  }

  createForm() {
    this.theForm = this.fb.group({
      name: '', // <--- the FormControl called "name"
    });
  }
}
</code>
</pre>
                    <p>FormBuilder.group is a factory method that creates a FormGroup</p>
                </section>

                <section>
                    <p>Inspecting the status of a form</p>
                    <p>
                        <code class="hljs html"><pre><p>Form value: {{ theForm.value | json }}</p>
Form status: {{ theForm.status | json }}
</pre></code>
                    </p>
                    <p>Nested form groups
                        <code class="hljs javascript"><pre>createForm() {
    this.heroForm = this.fb.group({ // <-- the parent FormGroup
      name: ['', Validators.required ],
      address: this.fb.group({ // <-- the child FormGroup
        street: '',
        city: '',
        state: '',
        zip: ''
      }),
      power: '',
      sidekick: ''
    });</pre></code>
                    </p>
                </section>
                <!-- <section>
                    <p>
                        <p>
                            <code class="hljs javascript"><pre>&nbsp;<div formGroupName="address" class="well well-lg">
  <div class="form-group">
    <label class="center-block">Street:
      <input class="form-control" formControlName="street">
    </label>
  </div>
  <div class="form-group">
    <label class="center-block">City:
      <input class="form-control" formControlName="city">
    </label>
  </div>
  <div class="form-group">
    <label class="center-block">State:
      <select class="form-control" formControlName="state">
        <option *ngFor="let state of states" [value]="state">{{state}}</option>
      </select>
    </label>
  </div>
  <div class="form-group">
    <label class="center-block">Zip Code:
      <input class="form-control" formControlName="zip">
    </label>
  </div>
</div>

</pre></code>
                        </p>

                </section> -->

                <section>
                    <table width="100%" style="font-size:28px">
                        <colgroup>
                            <col width="10%">
                            <col width="90%">
                        </colgroup>
                        <tbody>
                            <tr>
                                <th>Property</th>
                                <th>Description</th>
                            </tr>
                            <tr>
                                <td>
                                    <code>myControl.value</code>
                                </td>
                                <td>
                                    <p>the value of a
                                        <code>FormControl</code>.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>myControl.status</code>
                                </td>
                                <td>
                                    <p>the validity of a
                                        <code>FormControl</code>. Possible values:
                                        <code>VALID</code>,
                                        <code>INVALID</code>,
                                        <code>PENDING</code>, or
                                        <code>DISABLED</code>.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>myControl.pristine</code>
                                </td>
                                <td>
                                    <p>
                                        <code>true</code> if the user has
                                        <em>not</em> changed the value in the UI. Its opposite is
                                        <code>myControl.dirty</code>.</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <code>myControl.untouched</code>
                                </td>
                                <td>
                                    <p>
                                        <code>true</code> if the control user has not yet entered the HTML control and triggered its blur
                                        event. Its opposite is
                                        <code>myControl.touched</code>.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section>
                    <h4>setValue</h4>
                    <p>
                        <code class="hljs javascript"><pre>
this.myForm.setValue({
    name:    this.model.name,
    address: this.model.addresses[0] || new Address()
});

</pre></code>
                    </p>
                    <h4>patchValue</h4>
                    <p>
                        <code class="hljs javascript"><pre>
this.myForm.patchValue({
    name:    this.model.name
});

</pre></code>
                    </p>
                </section>
<section>
  <h2>Validation</h2>
  <ul>
    <li><a taraget='blank' href="https://angular.io/api/forms/Validators">Built in validators</a></li>
    <li>sync validators</li>
    <li>async validators - executed only all sync validators passes</li>
  </ul>
</section>
<section>
  <h2>Custom validators</h2>
<pre>
  <code class="hljs javascript">
export function forbiddenNameValidator(nameRe: RegExp): ValidatorFn {
  return (control: AbstractControl): {[key: string]: any} | null => {
    const forbidden = nameRe.test(control.value);
    return forbidden ? {'forbiddenName': {value: control.value}} : null;
  };
}
  </code>
</pre>
</section>
<section>
  <table>
      <tbody>
          <tr>
              <th>State</th>
              <th>Class if true</th>
              <th>Class if false</th>
          </tr>
          <tr>
              <td>The control has been visited.</td>
              <td>
                  <code>ng-touched</code>
              </td>
              <td>
                  <code>ng-untouched</code>
              </td>
          </tr>
          <tr>
              <td>The control's value has changed.</td>
              <td>
                  <code>ng-dirty</code>
              </td>
              <td>
                  <code>ng-pristine</code>
              </td>
          </tr>
          <tr>
              <td>The control's value is valid.</td>
              <td>
                  <code>ng-valid</code>
              </td>
              <td>
                  <code>ng-invalid</code>
              </td>
          </tr>
      </tbody>
  </table>
</section>
            </section>


            <section>
                <section>
                    <h2>HttpClient</h2>
                    <ul>
                        <li class="fragment">simplified client HTTP API</li>
                        <li class="fragment">testability features</li>
                        <li class="fragment">typed request and response objects</li>
                        <li class="fragment">request and response interception</li>
                        <li class="fragment">Observable apis</li>
                    </ul>
                </section>
                <section>
                    <ul>
                        <li>Import the HttpClientModule
                            <pre>
                                    <code class="hljs javascript">
import { HttpClientModule } from '@angular/common/http';
                                    </code>
                                </pre>
                        </li>
                        <li class="fragment">add it to the `imports` array
                            <pre>
                                    <code class="hljs javascript">
@NgModule({
  imports: [
    ...
    HttpClientModule,
                                    </code>
                                </pre>
                        </li>
                        <li class="fragment">Inject the HttpClient service in the constructor of your service
                            <pre>
                                    <code class="hljs javascript">
constructor(private http: HttpClient) {}
                                    </code>
                                </pre>
                        </li>
                    </ul>
                </section>

                <!--<section>
                        <ul>
                            <li>each Http service method returns an Observable of HTTP Response objects.</li>
                        </ul>
                    </section>-->

                <section>
                    <h4>Getting data from the server</h4>
                    <pre>
                            <code class="hljs javascript">
this.http.get<&#65;rray<&#67;ar>>(carsUrl); //returns a Observable<&#65;rray<&#67;ar>>
                            </code>
                        </pre>
                    <div class="fragment">
                        <h4>Get the response object</h4>
                        <pre>
                            <code class="hljs javascript">
getConfigResponse(): Observable<&#72;ttpResponse<&#67;onfig>> {
    return this.http.get<&#67;onfig>(
    this.configUrl, { observe: 'response' });
}
                            </code>
                        </pre>
                    </div>
                </section>

                <section>
                        <div>retry(), catchError
                            <pre>
                                    <code class="hljs javascript">
import { catchError, retry } from 'rxjs/operators';
...
this.http.get<&#67;onfig>(this.configUrl)
    .pipe(
        retry(3), // retry a failed request up to 3 times
        catchError(this.handleError) // then handle the error
    );
                                    </code>
                                </pre>
                            </div>
                </section>
            </section>


            <section>
                <section>
                    <h2>Reactive programming</h2>
                    <p class="fragment">async programming paradigm concerned with data streams and the propagation of change</p>
                </section>
                <!--<section>
                <h3>RxJS</h3>
                <img src="img/reactivex.png" alt="rxjs" class="borderless" width="256" >
            </section>-->
                <!--<section>
                        
                        <h2>RxJS in Angular</h2>
                        <p class="fragment">implements the asynchronous Observable pattern</p>
                    </section>-->

                <section>
                    <h2>RxJS</h2>
                    <ul>
                      <li class="fragment">provides implementation for observables</li>
                      <li class="fragment">utility functions for creating & working with Observables</li>
                      <li class="fragment">converting existing code for async operations to Observables </li>
                      <li class="fragment">iterating thru the values of a stream </li>
                      <li class="fragment">maping values to different types</li>
                      <li class="fragment">filtering / computing multiple streams</li>
                    </ul>
                </section>

                <section>
                  <h2>Creating operators</h2>
                  <p>from async code</p>
                  <pre>
                      <code class="hljs javascript">
import { from } from 'rxjs';

// Create an Observable out of a promise
const data = from(fetch('/api/endpoint'));

// Subscribe to begin listening for async result
data.subscribe({
  next(response) { console.log(response); },
  error(err) { console.error('Error: ' + err); },
  complete() { console.log('Completed'); }
});
                      </code>
                  </pre>
                </section>
                <section>
                    <p>from a counter</p>
                    <pre>
                        <code class="hljs javascript">
import { interval } from 'rxjs';

// Create an Observable that will publish a value on an interval
const secondsCounter = interval(1000);

// Subscribe to begin publishing values
secondsCounter.subscribe(n =>
console.log(`It's been ${n} seconds since subscribing!`));
                        </code>
                    </pre>
                  </section>
                  <section>
                      <p>from ajax</p>
                      <pre>
                          <code class="hljs javascript">
import { ajax } from 'rxjs/ajax';

// Create an Observable that will create an AJAX request
const apiData = ajax('/api/data');
// Subscribe to create the request
apiData.subscribe(res => console.log(res.status, res.response));
                          </code>
                      </pre>
                    </section>
                    <section>
                        <p>from a DOM event</p>
                        <pre>
                            <code class="hljs javascript">
import { fromEvent } from 'rxjs';

const el = document.getElementById('my-element');
  
// Create an Observable that will publish mouse movements
const mouseMoves = fromEvent(el, 'mousemove');
                            </code>
                        </pre>
                      </section>

                <section>
                  <h2>Operators</h2>
                  <ul>
                      <li>functions that allows to manipulate of collections - <a target="blank" href="https://rxjs-dev.firebaseapp.com/api">API</a></li>
                      <li>creation, combination, filtering, transformation, utility, multicasting</li>
                  </ul>
                  
<pre>
  <code class="hljs javascript">
import { filter, map } from 'rxjs/operators';

const nums = of(1, 2, 3, 4, 5);

// Create a function that accepts an Observable.
const squareOddVals = pipe(
  filter((n: number) => n % 2 !== 0),
  map(n => n * n)
);

// Create an Observable that will run the filter and map functions
const squareOdd = squareOddVals(nums);

// Suscribe to run the combined functions
squareOdd.subscribe(x => console.log(x));
  </code>
</pre>
<!-- <a href="https://rxjs-dev.firebaseapp.com/api">Common operators</a> -->
                </section>
                <section>
                    <h2>Error handling</h2>
                    <p>catchError operator</p>
                </section>
                <section>
                    <h2>Observables in Angular</h2>
                    <ul>
                      <li>EventEmitter</li>
                      <li>Http</li>
                      <li>async pipe</li>
                      <li>Router: events, activatedRoute, etc</li>
                      <li>Reactive forms</li>
                    </ul>
                </section>
                <!--<section>
                <h3>A lot of operators !</h3>
                <div style="float: left; width: 33%; font-size: 75%" class="fragment">
                    <ul>
                        <li>create</li>
                        <li>range</li>
                        <li>using</li>
                        <li>from</li>
                        <li>of</li>
                        <li>toPromise</li>
                        <li>toMap</li>
                        <li>toSet</li>
                        <li>toArray</li>
                        <li>amb</li>
                        <li>combineLatest</li>
                        <li>concat</li>
                        <li>startWith</li>
                        <li>merge</li>
                        <li>repeat</li>
                    </ul>
                </div>
                <div style="float: left; width: 33%; font-size: 75%" class="fragment">
                    <ul>
                        <li>withLatestFrom</li>
                        <li>zip</li>
                        <li>publish</li>
                        <li>replay</li>
                        <li>aggregate</li>
                        <li>average</li>
                        <li>count</li>
                        <li>max</li>
                        <li>min</li>
                        <li>reduce</li>
                        <li>sum</li>
                        <li>debounce</li>
                        <li>interval</li>
                        <li>filter</li>
                        <li>map</li>
                    </ul>
                </div>
                <div style="float: left; width: 33%; font-size: 75%" class="fragment">
                    <ul>
                        <li>elementAtOrDefault</li>
                        <li>flatMap</li>
                        <li>findIndex</li>
                        <li>first</li>
                        <li>pluck</li>
                        <li>select</li>
                        <li>single</li>
                        <li>take</li>
                        <li>takeLast</li>
                        <li>where</li>
                        <li>buffer</li>
                        <li>groupBy</li>
                        <li>join</li>
                        <li>windowd</li>
                        <li>do</li>
                    </ul>
                </div>
            </section>
            <section>
                <h3>Any documentation ?</h3>
                <p>Yes, and it's very fun !</p>
                <a href="http://rxmarbles.com/#map" target="_blank"><img src="img/marble.map.png" alt="map"></a>
            </section>-->
            </section>
        </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            history: true,

            // More info https://github.com/hakimel/reveal.js#dependencies
            dependencies: [
                { src: 'plugin/markdown/marked.js' },
                { src: 'plugin/markdown/markdown.js' },
                { src: 'plugin/notes/notes.js', async: true },
                {
                    src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                        hljs.initHighlightingOnLoad();
                    }
                }
            ]
        });
    </script>
</body>

</html>